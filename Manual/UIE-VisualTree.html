<!DOCTYPE html><html lang="en" class="no-js">
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<script>var offline=(location.href.indexOf('docs.unity3d.com')==-1)?true:false;if(!offline){(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=   'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);  })(window,document,'script','dataLayer','GTM-5V25JL6');}</script><link href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap" rel="stylesheet">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Unity - Manual:  The Visual Tree</title>
<meta property="og:image" content="https://unity3d.com/files/images/ogimg.jpg">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="https://unity.com/themes/contrib/unity_base/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFilesManual/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFilesManual/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFilesManual/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFilesManual/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFilesManual/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFilesManual/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFilesManual/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFilesManual/images/favicons/tileicon-144x144.png">
<script type="text/javascript" src="https://docs.unity3d.com/StaticFilesConfig/UnityVersionsInfo.js"></script><script type="text/javascript" src="../StaticFilesManual/js/jquery.js?ts=1576442311"></script><script type="text/javascript" src="../StaticFilesManual/js/core.js?ts=1576442311"></script><script type="text/javascript" src="docdata/toc.js?ts=1576442311"></script><script type="text/javascript" src="docdata/global_toc.js?ts=1576442311"></script><link rel="stylesheet" type="text/css" href="../StaticFilesManual/css/core.css?ts=1576442311">
<link rel="stylesheet" href="../StaticFilesManual/js/feedback/five-star-rating-master/css/rating.min.css">
<link rel="stylesheet" href="../StaticFilesManual/css/prism.css">
<script src="../StaticFilesManual/js/prism.js"></script><script src="../StaticFilesManual/js/feedback/five-star-rating-master/js/src/rating.js"></script><script src="../StaticFilesManual/js/jquery.sidebar.min.js"></script><link rel="stylesheet" href="../StaticFilesManual/css/mobileoptimisation.css">
<script src="../StaticFilesManual/js/mobileoptimisation.js"></script>
</head>
<body>
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5V25JL6" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<div id="DocsAnalyticsData" data-area="UIToolkits" data-pagetype="normal"></div>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div id="nav-open" for="nav-input"><span></span></div>
<div class="logo"><a href="https://docs.unity3d.com"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul>
<li><a href="../Manual/index.html" class="selected">Manual</a></li>
<li><a href="../ScriptReference/index.html">Scripting API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity3d.com/">unity3d.com</a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="toggle version-number" id="VersionNumber" data-target=".otherversionscontent">
                                Version: <b>2019.2</b><div class="otherversionscontent" id="OtherVersionsContent" style="display: none;">
<ul id="OtherVersionsContentUl"></ul>
<div id="otherVersionsLegend"><ul>
<li>
<div id="supportedColour" class="legendBox"></div>Supported</li>
<li>
<div id="notFoundColour" class="legendBox"></div>Legacy</li>
</ul></div>
</div>
<div id="VersionSwitcherArrow" class="arrow versionSwitcherArrow"></div>
</div>
<div class="lang-switcher"><div class="current toggle" data-target=".lang-list">
<div class="lbl">Language
:                <span class="b">English</span>
</div>
<div class="arrow"></div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/UIE-VisualTree.html">English</a></li>
<li><a href="/ja/current/Manual/UIE-VisualTree.html">日本語</a></li>
<li><a href="/es/current/Manual/UIE-VisualTree.html">Español</a></li>
<li><a href="/kr/current/Manual/UIE-VisualTree.html">한국어</a></li>
<li><a href="/ru/current/Manual/UIE-VisualTree.html">Русский</a></li>
</ul></div>
</div></div>
</div></div>
<div class="mobileLogo"><a href="https://docs.unity3d.com"></a></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc" id="customScrollbar">
<h2>Unity Manual</h2>
<div class="search-form sidebar-search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" id="mobileSearchBtn" class="submit" value="Search">
</form></div>
<div class="toggle version-number sidebar-version-switcher" id="VersionNumber" data-target=".otherversionscontent"><form id="otherVersionsContentMobileForm"><div class="ui-field-contain">
<label for="select-native-4">Version: 2019.2</label><select name="select-native-4" id="versionsSelectMobile"><option>Select a different version</option>
<optgroup id="versionsWithThisPageMobile" label="Versions with this page"></optgroup>
<optgroup id="versionsWithoutThisPageMobile" label="Versions without this page"></optgroup></select>
</div></form></div>
<div class="lang-switcher"><div class="current toggle" data-target=".lang-list">
<div class="lbl">Language
:                <span class="b">English</span>
</div>
<div class="arrow"></div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/UIE-VisualTree.html">English</a></li>
<li><a href="/ja/current/Manual/UIE-VisualTree.html">日本語</a></li>
<li><a href="/es/current/Manual/UIE-VisualTree.html">Español</a></li>
<li><a href="/kr/current/Manual/UIE-VisualTree.html">한국어</a></li>
<li><a href="/ru/current/Manual/UIE-VisualTree.html">Русский</a></li>
</ul></div>
</div></div>
</div></div></div></div></div>
<div id="content-wrap" class="content-wrap"><div class="content-block">
<div class="darkCover"></div>
<div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="UnityManual.html">Unity User Manual (2019.2)</a></li>
<li><a href="UIToolkits.html"> User interfaces (UI)</a></li>
<li><a href="UIElements.html"> UIElements Developer Guide</a></li>
<li> The Visual Tree</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="UIElements.html"></a></span><div class="tip"> UIElements Developer Guide</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="UIE-LayoutEngine.html"></a></span><div class="tip"> The Layout Engine</div>
</div>
</div></div>
<div class="scrollToFeedback"><a id="scrollToFeedback">Leave feedback</a></div>
<h1>The Visual Tree</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>The visual tree holds all the visual elements in a window. It is an object graph made of lightweight nodes refered to as <em>visual elements</em>. </p>

<p>These nodes are allocated on the C# heap, either manually or by loading UXML assets from a UXML template file. </p>

<p>Each node contains the layout information, its drawing and redrawing options, and how the node responds to events.</p>

<h2>VisualElement</h2>

<p>
<code>VisualElement</code> is the common base class for all nodes in the visual tree. The <code>VisualElement</code> base class contains properties for styles, layout data, local transformations, event handlers, and so on.</p>

<p>
<code>VisualElement</code> has several subclasses that define additional behaviour and functionality, including specialized controls. <code>VisualElement</code> may have child elements.</p>

<p>You are not required to derive from the <code>VisualElement</code> base class to work with UIElements. You can customize the look and behavior of a <code>VisualElement</code> through stylesheets and event callbacks.</p>

<h2>Connectivity</h2>

<p>The root object of the visual tree is referred to as the panel. A new element is ignored until it is connected to the panel. You can add elements to an existing element to attach your user interface to the panel. </p>

<p>To verify if a <code>VisualElement</code> is connected to a panel, you can test the <code>panel</code> property of this element. When the visual element is not connected, the test returns <code>null</code>.</p>

<p>You add a new element to the tree with the <code>rootVisualElement</code> element of a container object in the <code>UnityEditor.UIElements</code> namespace. </p>

<h2>Drawing order</h2>

<p>The elements in the visual tree are drawn in the following order:</p>

<ul>
<li>parents are drawn before their children</li>
<li>children are drawn according to their sibling list</li>
</ul>

<p>The only way to change their drawing order is to reorder <code>VisualElement</code>objects in their parents.</p>

<h2>Position, transforms, and coordinate systems</h2>

<p>The different coordinate systems are defined as follow:</p>

<ul>
<li>World: Coordinates are relative to the panel space. The panel is the highest element in the visual tree.</li>
<li>Local: Coordinates are relative to the element itself.</li>
</ul>

<p>The layout system computes the <code>VisualElement.layout</code> property (type <code>Rect</code>) for each element. </p>

<p>The <code>layout.position</code> is expressed as <span class="tooltip"><strong>pixels</strong><span class="tooltiptext">The smallest unit in a computer image. Pixel size depends on your screen resolution. Pixel lighting is calculated at every screen pixel. <a href="LightPerformance.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#pixel">Glossary</a></span></span></span> relative to the coordinate space of its parent. Although you can assign a value to <code>layout.position</code> directly, it is recommended that you use style sheets and the layout system to position elements.</p>

<p>Each <code>VisualElement</code> also has a <code>layout.transform</code> property (type<code>ITransform</code>) that positions an element relative to its parent. By default, the <code>transform</code> is the identity.</p>

<p>The <code>VisualElement.layout.position</code> and <code>VisualElement.layout.transform</code> properties define how to transform between the local coordinate system and the parent coordinate system.</p>

<p>The <code>VisualElementExtensions</code> static class provides the following extension methods that transform points and rectangles between coordinate systems:</p>

<ul>
<li>
<code>WorldToLocal</code> transforms a <code>Vector2</code> or <code>Rect</code> from <code>Panel</code> space to the referential within the element.</li>
<li>
<code>LocalToWorld</code> transforms a <code>Vector2</code> or <code>Rect</code> to <code>Panel</code> space referential</li>
<li>
<code>ChangeCoordinatesTo</code> transforms <code>Vector2</code> or <code>Rect</code> from the local space of one element to the local space of another.</li>
</ul>

<figure>
<img src="../uploads/Main/visualtree-hierarchy.png" alt="Visual tree hierarchy">
<figcaption>Visual tree hierarchy</figcaption>
</figure>

<p>For example, in the image above, the tree is arranged as follows:</p>

<ul>
<li>
<code>Panel</code>

<ul>
<li>Tab section (refered to as <code>DockArea</code> and labelled “Coordinates”)</li>
<li>Blue <code>VisualElement</code> acts as the root (refered to as “rootVisualContainer”)

<ul>
<li>Red <code>VisualElement</code> acts as a parent of the button (“red container”)

<ul>
<li><code>Button</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

<p>From the point of view of the panel:</p>

<ul>
<li>The origin of the panel is (0, 0) regardless of the referential</li>
<li>The origin of the root is (0, 22) in world space</li>
<li>The origin of the red container is (100, 122) in world space. Its
 <code>position</code> property (defined in <code>layout</code> property) is set as (100, 100) because it is relative to its parent: the root container.</li>
<li>The origin of the button is (100, 122) in the world space. Its <code>position</code> property (defined in <code>layout</code> property) is set as (0, 0) because it is relative to its parent: the red container.</li>
</ul>

<p>The origin of an element is its top left corner.</p>

<p>Use the <code>worldBound</code> property to retrieve the window space coordinates of the <code>VisualElement</code>, taking into account the transforms and positions of its ancestry. </p>

<hr>

<ul>
<li><span class="page-edit">2018–11–02 Page amended
</span></li>
</ul>
<div class="feedbackbox" id="feedbackbox">
<div id="rating"><p>Did you find this page useful? Please give it a rating:<br><div id="ratecontent" class="c-rating"></div>
</p></div>
<div id="ratingThanks" style="display:none"><p>Thanks for rating this page!</p></div>
<div id="problem"><p><a name="problem">Report a problem on this page</a></p></div>
<div id="problemType" style="display:none"><p>What kind of problem would you like to report?<ul type="problems">
<li><a name="needcode" id="problemneedcode">This page needs code samples</a></li>
<li><a name="code" id="problemcode">Code samples do not work</a></li>
<li><a name="missing" id="problemmissing">Information is missing</a></li>
<li><a name="incorrect" id="problemincorrect">Information is incorrect</a></li>
<li><a name="unclear" id="problemunclear">Information is unclear or confusing</a></li>
<li><a name="language" id="problemlanguage">There is a spelling/grammar error on this page</a></li>
<li><a name="other" id="problemother">Something else</a></li>
</ul>
<p><known_issues><p>Is something described here not working as you expect it to? It might be a <b>Known Issue</b>. Please check with the Issue Tracker at <a href="https://issuetracker.unity3d.com">issuetracker.unity3d.com</a>.</p></known_issues></p>
</p></div>
<div id="problemThanks" style="display:none"><p>Thanks for letting us know! This page has been marked for review based on your feedback.<br><br>If you have time, you can provide more information to help us fix the problem faster.<br><br><a id="problemThanksMoreInfoButton">Provide more information</a><br>
</p></div>
<div id="problemMoreInfo" style="display:none">
<p id="problemNeedCodeForm" style="display:none">You've told us this page needs code samples. If you'd like to help us further, you could provide a code sample, or tell us about what kind of code sample you'd like to see:</p>
<p id="problemCodeForm" style="display:none">You've told us there are code samples on this page which don't work. If you know how to fix it, or have something better we could use instead, please let us know:</p>
<p id="problemMissingForm" style="display:none">You've told us there is information missing from this page. Please tell us more about what's missing:</p>
<p id="problemIncorrectForm" style="display:none">You've told us there is incorrect information on this page. If you know what we should change to make it correct, please tell us:</p>
<p id="problemUnclearForm" style="display:none">You've told us this page has unclear or confusing information. Please tell us more about what you found unclear or confusing, or let us know how we could make it clearer:</p>
<p id="problemLanguageForm" style="display:none">You've told us there is a spelling or grammar error on this page. Please tell us what's wrong:</p>
<p id="problemOtherForm" style="display:none">You've told us this page has a problem. Please tell us more about what's wrong:</p>
<form>
<textarea id="problemFormSuggestionField" cols="40" rows="5"></textarea><input type="hidden" id="problemFormDescription"><input type="submit" id="problemFormDescriptionSubmit" value="Submit">
</form>
</div>
<div id="problemMoreInfoThanks" style="display:none"><p>Thanks for helping to make the Unity documentation better!</p></div>
<script>InitialiseStarRating();</script>
</div>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="UIElements.html"></a></span><div class="tip"> UIElements Developer Guide</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="UIE-LayoutEngine.html"></a></span><div class="tip"> The Layout Engine</div>
</div>
</div>
</div>
<div class="footer-wrapper"><div class="footer clear">
<div class="copy">Copyright © 2019 Unity Technologies. Publication: 2019.2-003J. Built: 2019-12-16.</div>
<div class="menu">
<a href="https://unity3d.com/learn">Tutorials</a><a href="https://answers.unity3d.com">Community Answers</a><a href="https://support.unity3d.com/hc/en-us">Knowledge Base</a><a href="https://forum.unity3d.com">Forums</a><a href="https://unity3d.com/asset-store">Asset Store</a>
</div>
</div></div>
</div>
</div></div>
</div>
</body>
</html>
