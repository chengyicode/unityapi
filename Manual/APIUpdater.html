<!DOCTYPE html><html lang="en" class="no-js">
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<script>var offline=(location.href.indexOf('docs.unity3d.com')==-1)?true:false;if(!offline){(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=   'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);  })(window,document,'script','dataLayer','GTM-5V25JL6');}</script><link href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap" rel="stylesheet">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Unity - Manual:  Using the Automatic API Updater</title>
<meta property="og:image" content="https://unity3d.com/files/images/ogimg.jpg">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="https://unity.com/themes/contrib/unity_base/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFilesManual/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFilesManual/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFilesManual/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFilesManual/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFilesManual/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFilesManual/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFilesManual/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFilesManual/images/favicons/tileicon-144x144.png">
<script type="text/javascript" src="https://docs.unity3d.com/StaticFilesConfig/UnityVersionsInfo.js"></script><script type="text/javascript" src="../StaticFilesManual/js/jquery.js?ts=1576442311"></script><script type="text/javascript" src="../StaticFilesManual/js/core.js?ts=1576442311"></script><script type="text/javascript" src="docdata/toc.js?ts=1576442311"></script><script type="text/javascript" src="docdata/global_toc.js?ts=1576442311"></script><link rel="stylesheet" type="text/css" href="../StaticFilesManual/css/core.css?ts=1576442311">
<link rel="stylesheet" href="../StaticFilesManual/js/feedback/five-star-rating-master/css/rating.min.css">
<link rel="stylesheet" href="../StaticFilesManual/css/prism.css">
<script src="../StaticFilesManual/js/prism.js"></script><script src="../StaticFilesManual/js/feedback/five-star-rating-master/js/src/rating.js"></script><script src="../StaticFilesManual/js/jquery.sidebar.min.js"></script><link rel="stylesheet" href="../StaticFilesManual/css/mobileoptimisation.css">
<script src="../StaticFilesManual/js/mobileoptimisation.js"></script>
</head>
<body>
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5V25JL6" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<div id="DocsAnalyticsData" data-area="UnityOverview" data-pagetype="normal"></div>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div id="nav-open" for="nav-input"><span></span></div>
<div class="logo"><a href="https://docs.unity3d.com"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul>
<li><a href="../Manual/index.html" class="selected">Manual</a></li>
<li><a href="../ScriptReference/index.html">Scripting API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity3d.com/">unity3d.com</a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="toggle version-number" id="VersionNumber" data-target=".otherversionscontent">
                                Version: <b>2019.2</b><div class="otherversionscontent" id="OtherVersionsContent" style="display: none;">
<ul id="OtherVersionsContentUl"></ul>
<div id="otherVersionsLegend"><ul>
<li>
<div id="supportedColour" class="legendBox"></div>Supported</li>
<li>
<div id="notFoundColour" class="legendBox"></div>Legacy</li>
</ul></div>
</div>
<div id="VersionSwitcherArrow" class="arrow versionSwitcherArrow"></div>
</div>
<div class="lang-switcher"><div class="current toggle" data-target=".lang-list">
<div class="lbl">Language
:                <span class="b">English</span>
</div>
<div class="arrow"></div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/APIUpdater.html">English</a></li>
<li><a href="/ja/current/Manual/APIUpdater.html">日本語</a></li>
<li><a href="/es/current/Manual/APIUpdater.html">Español</a></li>
<li><a href="/kr/current/Manual/APIUpdater.html">한국어</a></li>
<li><a href="/ru/current/Manual/APIUpdater.html">Русский</a></li>
</ul></div>
</div></div>
</div></div>
<div class="mobileLogo"><a href="https://docs.unity3d.com"></a></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc" id="customScrollbar">
<h2>Unity Manual</h2>
<div class="search-form sidebar-search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" id="mobileSearchBtn" class="submit" value="Search">
</form></div>
<div class="toggle version-number sidebar-version-switcher" id="VersionNumber" data-target=".otherversionscontent"><form id="otherVersionsContentMobileForm"><div class="ui-field-contain">
<label for="select-native-4">Version: 2019.2</label><select name="select-native-4" id="versionsSelectMobile"><option>Select a different version</option>
<optgroup id="versionsWithThisPageMobile" label="Versions with this page"></optgroup>
<optgroup id="versionsWithoutThisPageMobile" label="Versions without this page"></optgroup></select>
</div></form></div>
<div class="lang-switcher"><div class="current toggle" data-target=".lang-list">
<div class="lbl">Language
:                <span class="b">English</span>
</div>
<div class="arrow"></div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/APIUpdater.html">English</a></li>
<li><a href="/ja/current/Manual/APIUpdater.html">日本語</a></li>
<li><a href="/es/current/Manual/APIUpdater.html">Español</a></li>
<li><a href="/kr/current/Manual/APIUpdater.html">한국어</a></li>
<li><a href="/ru/current/Manual/APIUpdater.html">Русский</a></li>
</ul></div>
</div></div>
</div></div></div></div></div>
<div id="content-wrap" class="content-wrap"><div class="content-block">
<div class="darkCover"></div>
<div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="UnityManual.html">Unity User Manual (2019.2)</a></li>
<li><a href="UnityOverview.html">Working in Unity</a></li>
<li><a href="UpgradeGuides.html">Upgrade Guides</a></li>
<li> Using the Automatic API Updater</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="UpgradeGuides.html"></a></span><div class="tip">Upgrade Guides</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="UpgradeGuide20192.html"></a></span><div class="tip">Upgrading to Unity 2019.2</div>
</div>
</div></div>
<div class="scrollToFeedback"><a id="scrollToFeedback">Leave feedback</a></div>
<h1>Using the Automatic API Updater</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>Sometimes, during development of the Unity software, we make the decision to change and improve the way the classes, functions and properties (the API) work. We do this with a focus on causing the least impact on user’s existing game code, but sometimes in order to make things better, we have to break things.</p>

<p>We tend to only introduce these significant “breaking changes” when moving from one significant version of Unity to another, and only in cases that it makes Unity easier to use (meaning users will incur fewer errors) or brings measurable performance gains, and only after careful alternative consideration. However, the upshot of this is that if you were to - for example - open a Unity 4 project in Unity 5, you might find some of the scripting commands that you used have now been changed, removed, or work a little differently.</p>

<p>One obvious example of this is that in Unity 5, we removed the “quick accessors” which allowed you to reference common component types on a <span class="tooltip"><strong>GameObject</strong><span class="tooltiptext">The fundamental object in Unity scenes, which can represent characters, props, scenery, cameras, waypoints, and more. A GameObject’s functionality is defined by the Components attached to it. <a href="class-GameObject.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#GameObject">Glossary</a></span></span></span> directly, such as <code>gameObject.light</code>, <code>gameObject.camera</code>, <code>gameObject.audioSource</code>, etc.</p>

<p>In Unity 5, you now have to use the GetComponent command for all types, except transform. Therefore if you open a Unity 4 project that uses <code>gameObject.light</code> in Unity 5, you will find that particular line of code is <em>obsolete</em> and needs to be updated.</p>

<h2>The automatic updater</h2>

<p>Unity has an <strong>Automatic Obsolete API Updater</strong> which will detect uses of obsolete code in your <span class="tooltip"><strong>scripts</strong><span class="tooltiptext">A piece of code that allows you to create your own Components, trigger game events, modify Component properties over time and respond to user input in any way you like. <a href="CreatingAndUsingScripts.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#Scripts">Glossary</a></span></span></span>, and can offer to automatically update them. If you accept, it will rewrite your code using the updated version of the API. </p>

<figure>
<img src="../uploads/Main/APIUpdaterWarningDialog.png" alt="The API Update dialog">
<figcaption>The API Update dialog</figcaption>
</figure>

<p>Obviously, as always, it’s important to have a backup of your work in case anything goes wrong, but particularly when you’re allowing software to rewrite your code! Once you’ve ensured you have a backup, and clicked the “Go Ahead” button, Unity will rewrite any instances of obsolete code with the recommended updated version.</p>

<p>For example you had a script which did this:</p>

<pre><code>
light.color = Color.red;

</code></pre>

<p>Unity’s API updater would convert that for you to:</p>

<pre><code>
GetComponent&lt;Light&gt;().color = Color.red;

</code></pre>

<p>The overall workflow of the updater is as follows:</p>

<ol>
<li><p>Open a project / import a package that contains scripts / assemblies with obsoleted API usage</p></li>
<li><p>Unity triggers a script compilation</p></li>
<li><p>API updater checks for particular compiler errors that it knows are “updatable”</p></li>
<li><p>If any occurrence is found in the previous step, show a dialog to user offering automatic update, otherwise, we’ve finished.</p></li>
<li><p>If user accepts the update, then run API updater (which will update all scripts written in the same language being compiled in step 2)</p></li>
<li><p>Go to step 2 (to take any updated code into account) until no scripts get updated in step 5</p></li>
</ol>

<p>So, from the list above you can see the updater may run multiple times if there are scripts which fall into different compilation passes (Eg, scripts in different languages, editor scripts, etc) that use obsolete code.</p>

<p>When the API Updater successfully finishes, the console displays the following notification:</p>

<figure>
<img src="../uploads/Main/APIUpdaterFinishedConsoleLog.png" alt="Success notification">
<figcaption>Success notification</figcaption>
</figure>

<p>If you choose <em>not</em> to allow the API updater to update your scripts, you will see the script errors in your console as normal. You will also notice that the errors which the API Updater could update automatically are marked as <strong>(UnityUpgradable)</strong> in the error message.</p>

<figure>
<img src="../uploads/Main/APIUpdaterRejectedConsoleErrors.png" alt="Errors in the console, when the API updater is canceled">
<figcaption>Errors in the console, when the API updater is canceled</figcaption>
</figure>

<p>If your script has other errors, in addition to obsolete API uses, the API updater may not be able to fully finish its work until you have fixed the other errors. In this case, you’ll be notified in the <span class="tooltip"><strong>console window</strong><span class="tooltiptext">A Unity Editor window that shows errors, warnings and other messages generated by Unity, or your own scripts. <a href="Console.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#Consolewindow">Glossary</a></span></span></span> with a message like this:</p>

<figure>
<img src="../uploads/Main/APIUpdaterOtherErrors.png" alt="Other errors in your scripts can prevent the API updater from working properly.">
<figcaption>Other errors in your scripts can prevent the API updater from working properly.</figcaption>
</figure>

<p>“Some scripts have compilation errors which may prevent obsolete API usages to get updated. Obsolete API updating will continue automatically after these errors get fixed.”</p>

<p>Once you have fixed the other errors in your script, you can run the API updater again. The API updater runs automatically when a script compilation is triggered, but you can also run it manually from the Assets menu, here:</p>

<figure>
<img src="../uploads/Main/APIUpdaterMenuOption.png" alt="The API Updater can be run manually from the Assets menu.">
<figcaption>The API Updater can be run manually from the Assets menu.</figcaption>
</figure>

<h2>Command line mode</h2>

<p>When running Unity in batch mode from the command line, use the <code>-accept-apiupdate</code> option to allow the API Updater to run. For more information, see <a href="CommandLineArguments.html">Command Line Arguments</a>.</p>

<h2>Logging</h2>

<p>A <span class="tooltip"><a href="https://en.wikipedia.org/wiki/Version_control">Version control</a><span class="tooltiptext">A system for managing file changes. You can use Unity in conjunction with most common version control tools, including Perforce, Git, Mercurial and PlasticSCM. <a href="VersionControl.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#VersionControl">Glossary</a></span></span></span> system helps you see which changes the APIUpdater applies to a Project’s scripts. However, this can be difficult when dealing with pre-compiled assemblies. To see the list of changes made by the AssemblyUpdater (the APIUpdater component responsible for updating assemblies), set the <code>UNITY_ASSEMBLYUPDATE_LOGTHRESHOLD</code> environment variable to the desirable log threshold and start Unity. For example, on Windows you can enter:</p>

<pre><code>c:&gt; set UNITY_ASSEMBLYUPDATE_LOGTHRESHOLD=Debug

c:&gt; \path\to\unity\Unity.exe
</code></pre>

<p>After AssemblyUpdater has finished, you can see the updates that have been applied in the Editor.log:</p>

<pre><code>[AssemblyUpdater] Property access to 'UnityEngine.Rigidbody
UnityEngine.GameObject::get_rigidbody()' in 'System.Void
Test.ClassReferencingObsoleteUnityAPIThroughEditorAssembly::Run()' replaced with 'T
UnityEngine.GameObject::GetComponent&lt;UnityEngine.Rigidbody&gt;()'.
</code></pre>

<p>The valid values for the <code>UNITY_ASSEMBLYUPDATE_LOGTHRESHOLD</code> environment variable are, in increasing order of detail:</p>

<ul>
<li><p>
<strong>Error:</strong> The AssemblyUpdater only logs <strong>Error</strong> messages. Error messages are logged when the AssemblyUpdater fails to apply a specific update, which requires you to take corrective action (usually requesting the original assembly author to provide an updated version of the assembly).</p></li>
<li><p>
<strong>Warning:</strong> The AssemblyUpdater only logs <strong>Warning</strong>, and <strong>Error</strong> messages. Warning messages usually indicate that the AssemblyUpdater has reached a state that could be a potential problem. These problems can depend on conditions not known to the AssemblyUpdater at the point the message was logged.</p></li>
<li><p>
<strong>Info:</strong> The AssemblyUpdater only logs <strong>Informational</strong>, <strong>Warning</strong>, and <strong>Error</strong> messages. Info messages include updates applied by the AssemblyUpdater.</p></li>
<li><p>
<strong>Debug:</strong> The AssemblyUpdater logs all messages. Debug help with troubleshooting. You may want to set the threshold to this level if you are having issues with the AssemblyUpdater and you want to report them to Unity.</p></li>
</ul>

<p>
<strong>Error</strong> is the default value when <code>UNITY_ASSEMBLYUPDATE_LOGTHRESHOLD</code> is not set.</p>

<h2>Troubleshooting</h2>

<p>If you get a message saying “API Updating failed. Check previous console messages.” this means the API updater encountered a problem that prevented it from finishing its work.</p>

<p>A common cause of this is if the updater was unable to save its changes - For example - the user may not have rights to modify the updated script because it is write protected.</p>

<p>By checking the previous lines in the console as instructed, you should be able to see the problems that occurred during the update process.</p>

<figure>
<img src="../uploads/Main/APIUpdaterFailed.png" alt="In this example the API updater failed because it did not have write permission for the script file.">
<figcaption>In this example the API updater failed because it did not have write permission for the script file.</figcaption>
</figure>

<h2>Limitations</h2>

<p>The API updater cannot automatically fix every API change. Generally, API that is upgradable is marked with <code>(UnityUpgradable)</code> in the obsolete message. For example:</p>

<pre><code>
[Obsolete(&quot;Foo property has been deprecated. Please use Bar (UnityUpgradable)&quot;)]

</code></pre>

<p>The API updater only handles APIs marked as <code>(UnityUpgradable)</code>. </p>

<p>The API updater might not run if the only updatable API in your scripts include component or GameObject common properties, and those scripts only access members of those properties. Examples of common properties are <code>renderer</code> and <code>rigidbody</code>, and example members of those properties are <code>rigidbody.mass</code> and <code>renderer.bounds</code>. To workaround this, add a dummy method to any of your scripts to trigger the API updater. For example:</p>

<pre><code>
private object Dummy(GameObject o) { return o.<span class="tooltip">__rigidbody__<span class="tooltiptext">A component that allows a GameObject to be affected by simulated gravity and other forces. [More info](class-Rigidbody.html)&lt;span class=&quot;tooltipGlossaryLink&quot;&gt;See in [Glossary](Glossary.html#Rigidbody)&lt;/span&gt;</span></span>;}.

</code></pre>

<ul>
<li><p><span class="page-edit">2018–07–31 Page amended
</span></p></li>
<li><p><span class="page-history">“accept-apiupdate” command line option added in Unity 2017.2</span></p></li>
<li><p><span class="page-history">AssemblyUpdater logging improved in Unity <a href="https://docs.unity3d.com/2018.3/Documentation/Manual/30_search.html?q=newin20183">2018.3</a> <span class="search-words">NewIn20183</span></span></p></li>
</ul>
<div class="feedbackbox" id="feedbackbox">
<div id="rating"><p>Did you find this page useful? Please give it a rating:<br><div id="ratecontent" class="c-rating"></div>
</p></div>
<div id="ratingThanks" style="display:none"><p>Thanks for rating this page!</p></div>
<div id="problem"><p><a name="problem">Report a problem on this page</a></p></div>
<div id="problemType" style="display:none"><p>What kind of problem would you like to report?<ul type="problems">
<li><a name="needcode" id="problemneedcode">This page needs code samples</a></li>
<li><a name="code" id="problemcode">Code samples do not work</a></li>
<li><a name="missing" id="problemmissing">Information is missing</a></li>
<li><a name="incorrect" id="problemincorrect">Information is incorrect</a></li>
<li><a name="unclear" id="problemunclear">Information is unclear or confusing</a></li>
<li><a name="language" id="problemlanguage">There is a spelling/grammar error on this page</a></li>
<li><a name="other" id="problemother">Something else</a></li>
</ul>
<p><known_issues><p>Is something described here not working as you expect it to? It might be a <b>Known Issue</b>. Please check with the Issue Tracker at <a href="https://issuetracker.unity3d.com">issuetracker.unity3d.com</a>.</p></known_issues></p>
</p></div>
<div id="problemThanks" style="display:none"><p>Thanks for letting us know! This page has been marked for review based on your feedback.<br><br>If you have time, you can provide more information to help us fix the problem faster.<br><br><a id="problemThanksMoreInfoButton">Provide more information</a><br>
</p></div>
<div id="problemMoreInfo" style="display:none">
<p id="problemNeedCodeForm" style="display:none">You've told us this page needs code samples. If you'd like to help us further, you could provide a code sample, or tell us about what kind of code sample you'd like to see:</p>
<p id="problemCodeForm" style="display:none">You've told us there are code samples on this page which don't work. If you know how to fix it, or have something better we could use instead, please let us know:</p>
<p id="problemMissingForm" style="display:none">You've told us there is information missing from this page. Please tell us more about what's missing:</p>
<p id="problemIncorrectForm" style="display:none">You've told us there is incorrect information on this page. If you know what we should change to make it correct, please tell us:</p>
<p id="problemUnclearForm" style="display:none">You've told us this page has unclear or confusing information. Please tell us more about what you found unclear or confusing, or let us know how we could make it clearer:</p>
<p id="problemLanguageForm" style="display:none">You've told us there is a spelling or grammar error on this page. Please tell us what's wrong:</p>
<p id="problemOtherForm" style="display:none">You've told us this page has a problem. Please tell us more about what's wrong:</p>
<form>
<textarea id="problemFormSuggestionField" cols="40" rows="5"></textarea><input type="hidden" id="problemFormDescription"><input type="submit" id="problemFormDescriptionSubmit" value="Submit">
</form>
</div>
<div id="problemMoreInfoThanks" style="display:none"><p>Thanks for helping to make the Unity documentation better!</p></div>
<script>InitialiseStarRating();</script>
</div>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="UpgradeGuides.html"></a></span><div class="tip">Upgrade Guides</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="UpgradeGuide20192.html"></a></span><div class="tip">Upgrading to Unity 2019.2</div>
</div>
</div>
</div>
<div class="footer-wrapper"><div class="footer clear">
<div class="copy">Copyright © 2019 Unity Technologies. Publication: 2019.2-003J. Built: 2019-12-16.</div>
<div class="menu">
<a href="https://unity3d.com/learn">Tutorials</a><a href="https://answers.unity3d.com">Community Answers</a><a href="https://support.unity3d.com/hc/en-us">Knowledge Base</a><a href="https://forum.unity3d.com">Forums</a><a href="https://unity3d.com/asset-store">Asset Store</a>
</div>
</div></div>
</div>
</div></div>
</div>
</body>
</html>
