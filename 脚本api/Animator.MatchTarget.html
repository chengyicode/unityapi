<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <link href="./css/stylesheet.css" rel="stylesheet" type="text/css"><title>Unity - Scripting API: Animator.MatchTarget</title></head> <body> <div class="content"><div class="section"><div class="mb20 clear" id=""><h1 class="heading inherit"><a href="Animator.html">Animator</a>.MatchTarget</h1><div class="clear"></div><div class="clear"></div><div class="suggest"><div class="suggest-wrap rel hide"><div class="loading hide"><div></div><div></div><div></div></div></div></div><a href='../Manual/class-Animator.html' title='Go to Animator Component in the Manual' class='switch-link gray-btn sbtn left show'>Switch to Manual</a><div class="clear"></div></div><div class="subsection"><div class="signature"><div class="signature-CS sig-block"><span style="color:red;"></span>public void <span class="sig-kw">MatchTarget</span>(<a href="Vector3.html">Vector3</a> <span class="sig-kw">matchPosition</span>,
<a href="Quaternion.html">Quaternion</a> <span class="sig-kw">matchRotation</span>,
<a href="AvatarTarget.html">AvatarTarget</a> <span class="sig-kw">targetBodyPart</span>,
<a href="MatchTargetWeightMask.html">MatchTargetWeightMask</a> <span class="sig-kw">weightMask</span>,
float <span class="sig-kw">startNormalizedTime</span>,
float <span class="sig-kw">targetNormalizedTime</span> = 1);
    </div></div></div><div class="subsection"><h2>Parameters</h2><table class="list"><tr><td class="name lbl">matchPosition</td><td class="desc"></td><td class="desc1">The position we want the body part to reach.</td></tr><tr><td class="name lbl">matchRotation</td><td class="desc"></td><td class="desc1">The rotation in which we want the body part to be.</td></tr><tr><td class="name lbl">targetBodyPart</td><td class="desc"></td><td class="desc1">The body part that is involved in the match.</td></tr><tr><td class="name lbl">weightMask</td><td class="desc"></td><td class="desc1">Structure that contains weights for matching position and rotation.</td></tr><tr><td class="name lbl">startNormalizedTime</td><td class="desc"></td><td class="desc1">Start time within the animation clip (0 - beginning of clip, 1 - end of clip).</td></tr><tr><td class="name lbl">targetNormalizedTime</td><td class="desc"></td><td class="desc1">End time within the animation clip (0 - beginning of clip, 1 - end of clip), values greater than 1 can be set to trigger a match after a certain number of loops. Ex: 2.3 means at 30% of 2nd loop.</td></tr></table></div><div class="subsection"><h2>Description   描述</h2><p>Automatically adjust the <code class="varname">GameObject</code> position and rotation.</p></div><div class="subsection"><p>Adjust the <code class="varname">GameObject</code> position and rotation so that the AvatarTarget reaches the matchPosition when the current state is at the specified progress. Target matching only works on the base layer (index 0).
You can only queue one match target at a time and you must wait for the first one to finish, otherwise your target matching will be discarded.
If you call a <a href="Animator.MatchTarget.html">MatchTarget</a> with a start time lower than the clip's normalized time and the clip can loop, <a href="Animator.MatchTarget.html">MatchTarget</a> will adjust the time to match the next clip loop. For example, start time= 0.2 normalized time = 0.3, start time will be 1.2.  <a href="Animator-applyRootMotion.html">Animator.applyRootMotion</a> must be enabled for MatchTarget to take effect.</p></div><div class="subsection">
        
        <pre class="codeExampleCS">
using UnityEngine;<br /><br />public class TargetMatchingManager : <a href="MonoBehaviour.html">MonoBehaviour</a>
{
    public void MatchTarget(<a href="Vector3.html">Vector3</a> matchPosition, <a href="Quaternion.html">Quaternion</a> matchRotation, <a href="AvatarTarget.html">AvatarTarget</a> target, <a href="MatchTargetWeightMask.html">MatchTargetWeightMask</a> weightMask, float normalisedStartTime, float normalisedEndTime)
    {
        var animator = GetComponent&lt;<a href="Animator.html">Animator</a>&gt;();<br /><br />        if (animator.isMatchingTarget)
            return;<br /><br />        float normalizeTime = <a href="Mathf.Repeat.html">Mathf.Repeat</a>(animator.GetCurrentAnimatorStateInfo(0).normalizedTime, 1f);<br /><br />        if (normalizeTime &gt; normalisedEndTime)
            return;<br /><br />        animator.MatchTarget(matchPosition, matchRotation, target, weightMask, normalisedStartTime, normalisedEndTime);
    }
}
</pre>
      </div></div></div></div></body></html>