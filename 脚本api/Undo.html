<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <link href="./css/stylesheet.css" rel="stylesheet" type="text/css"><title>Unity - Scripting API: Undo</title></head> <body> <div class="content"><div class="section"><div class="mb20 clear" id=""><h1 class="heading inherit">Undo</h1><div class="clear"></div><p class="cl mb0 left mr10">class in
          UnityEditor</p><p class="cl mb0 left mr10">/</p><p class="cl mb0 left">Implemented in:<a href="UnityEditor.html" class="cl">UnityEditor</a></p><div class="clear"></div><div class="suggest"><div class="suggest-wrap rel hide"><div class="loading hide"><div></div><div></div><div></div></div></div></div><a href="" class="switch-link gray-btn sbtn left hide"></a><div class="clear"></div></div><div class="subsection"><div class="signature"><div class="signature-CS sig-block"><span style="color:red;"></span></div></div></div><div class="subsection"><h2>Description   描述</h2><p>Lets you register undo operations on specific objects you are about to perform changes on.</p></div><div class="subsection"><p>The Undo system stores delta changes in the undo stack.<br /><br />Undo operations are automatically combined together based on events, e.g. mouse down events will split undo groups. Grouped undo operations will appear and work as a single undo. To control grouping manually use <a href="Undo.IncrementCurrentGroup.html">Undo.IncrementCurrentGroup</a>.<br /><br />By default, the name shown in the UI will be selected from the actions belonging to the group using a hardcoded ordering of the different kinds of actions. To manually set the name, use <a href="Undo.SetCurrentGroupName.html">Undo.SetCurrentGroupName</a>.<br /><br />Undo operations store either per property or per object state. This way they scale well with any Scene size.<br /><br />The most important operations are outlined below:<br /><br />Modifying a single property:<br />
<code class="mono">Undo.RecordObject (myGameObject.transform, "Zero Transform Position");</code><br />
<code class="mono">myGameObject.transform.position = Vector3.zero;</code><br /><br />Adding a component:<br />
<code class="mono">Undo.AddComponent&lt;RigidBody&gt;(myGameObject);</code><br /><br />Creating a new game object:<br />
<code class="mono">var go = new GameObject();</code><br />
<code class="mono">Undo.RegisterCreatedObjectUndo (go, "Created go");</code><br /><br />Destroying a game object or component:<br />
<code class="mono">Undo.DestroyObjectImmediate (myGameObject);</code><br /><br />Changing transform parenting:<br />
<code class="mono">Undo.SetTransformParent (myGameObject.transform, newTransformParent, "Set new parent");</code></p></div><div class="subsection"><h2>Static Properties</h2><table class="list">
      <tr><td class="descn"></td><td class="lbl"><a href="Undo-undoRedoPerformed.html">undoRedoPerformed</a></td><td class="desc"></td><td class="desc1">Callback that is triggered after an undo or redo was executed.</td></tr>
      <tr><td class="descn"></td><td class="lbl"><a href="Undo-willFlushUndoRecord.html">willFlushUndoRecord</a></td><td class="desc"></td><td class="desc1">Invoked before the Undo system performs a flush.</td></tr>
    </table></div><div class="subsection"><h2>Static Methods   静态方法</h2><table class="list">
      <tr><td class="descn"></td><td class="lbl"><a href="Undo.AddComponent.html">AddComponent</a></td><td class="desc"></td><td class="desc1">Adds a component to the game object and registers an undo operation for this action.</td></tr>
      <tr><td class="descn"></td><td class="lbl"><a href="Undo.ClearAll.html">ClearAll</a></td><td class="desc"></td><td class="desc1">Removes all undo and redo operations from  respectively the undo and redo stacks.</td></tr>
      <tr><td class="descn"></td><td class="lbl"><a href="Undo.ClearUndo.html">ClearUndo</a></td><td class="desc"></td><td class="desc1">Removes all Undo operation for the identifier object registered using Undo.RegisterCompleteObjectUndo from the undo stack.</td></tr>
      <tr><td class="descn"></td><td class="lbl"><a href="Undo.CollapseUndoOperations.html">CollapseUndoOperations</a></td><td class="desc"></td><td class="desc1">Collapses all undo operation up to group index together into one step.</td></tr>
      <tr><td class="descn"></td><td class="lbl"><a href="Undo.DestroyObjectImmediate.html">DestroyObjectImmediate</a></td><td class="desc"></td><td class="desc1">Destroys the object and records an undo operation so that it can be recreated.</td></tr>
      <tr><td class="descn"></td><td class="lbl"><a href="Undo.FlushUndoRecordObjects.html">FlushUndoRecordObjects</a></td><td class="desc"></td><td class="desc1">Ensure objects recorded using RecordObject or ::ref:RecordObjects are registered as an undoable action. In most cases there is no reason to invoke FlushUndoRecordObjects since it's automatically done right after mouse-up and certain other events that conventionally marks the end of an action.</td></tr>
      <tr><td class="descn"></td><td class="lbl"><a href="Undo.GetCurrentGroup.html">GetCurrentGroup</a></td><td class="desc"></td><td class="desc1">Unity automatically groups undo operations by the current group index.</td></tr>
      <tr><td class="descn"></td><td class="lbl"><a href="Undo.GetCurrentGroupName.html">GetCurrentGroupName</a></td><td class="desc"></td><td class="desc1">Get the name that will be shown in the UI for the current undo group.</td></tr>
      <tr><td class="descn"></td><td class="lbl"><a href="Undo.IncrementCurrentGroup.html">IncrementCurrentGroup</a></td><td class="desc"></td><td class="desc1">Unity automatically groups undo operations by the current group index.</td></tr>
      <tr><td class="descn"></td><td class="lbl"><a href="Undo.MoveGameObjectToScene.html">MoveGameObjectToScene</a></td><td class="desc"></td><td class="desc1">Move a GameObject from its current Scene to a new Scene.
It is required that the GameObject is at the root of its current Scene.</td></tr>
      <tr><td class="descn"></td><td class="lbl"><a href="Undo.PerformRedo.html">PerformRedo</a></td><td class="desc"></td><td class="desc1">Perform an Redo operation.</td></tr>
      <tr><td class="descn"></td><td class="lbl"><a href="Undo.PerformUndo.html">PerformUndo</a></td><td class="desc"></td><td class="desc1">Perform an Undo operation.</td></tr>
      <tr><td class="descn"></td><td class="lbl"><a href="Undo.RecordObject.html">RecordObject</a></td><td class="desc"></td><td class="desc1">Records any changes done on the object after the RecordObject function.</td></tr>
      <tr><td class="descn"></td><td class="lbl"><a href="Undo.RecordObjects.html">RecordObjects</a></td><td class="desc"></td><td class="desc1">Records multiple undoable objects in a single call. This is the same as calling Undo.RecordObject multiple times.</td></tr>
      <tr><td class="descn"></td><td class="lbl"><a href="Undo.RegisterCompleteObjectUndo.html">RegisterCompleteObjectUndo</a></td><td class="desc"></td><td class="desc1">Stores a copy of the object states on the undo stack.</td></tr>
      <tr><td class="descn"></td><td class="lbl"><a href="Undo.RegisterCreatedObjectUndo.html">RegisterCreatedObjectUndo</a></td><td class="desc"></td><td class="desc1">Register an undo operations for a newly created object.</td></tr>
      <tr><td class="descn"></td><td class="lbl"><a href="Undo.RegisterFullObjectHierarchyUndo.html">RegisterFullObjectHierarchyUndo</a></td><td class="desc"></td><td class="desc1">Copy the states of a hierarchy of objects onto the undo stack.</td></tr>
      <tr><td class="descn"></td><td class="lbl"><a href="Undo.RevertAllDownToGroup.html">RevertAllDownToGroup</a></td><td class="desc"></td><td class="desc1">Performs all undo operations up to the group index without storing a redo operation in the process.</td></tr>
      <tr><td class="descn"></td><td class="lbl"><a href="Undo.RevertAllInCurrentGroup.html">RevertAllInCurrentGroup</a></td><td class="desc"></td><td class="desc1">Performs the last undo operation but does not record a redo operation.</td></tr>
      <tr><td class="descn"></td><td class="lbl"><a href="Undo.SetCurrentGroupName.html">SetCurrentGroupName</a></td><td class="desc"></td><td class="desc1">Set the name of the current undo group.</td></tr>
      <tr><td class="descn"></td><td class="lbl"><a href="Undo.SetTransformParent.html">SetTransformParent</a></td><td class="desc"></td><td class="desc1">Sets the parent of transform to the new parent and records an undo operation.</td></tr>
    </table></div><div class="subsection"><h2>Delegates</h2><table class="list">
      <tr><td class="descn"></td><td class="lbl"><a href="Undo.UndoRedoCallback.html">UndoRedoCallback</a></td><td class="desc"></td><td class="desc1">Delegate used for undoRedoPerformed.</td></tr>
      <tr><td class="descn"></td><td class="lbl"><a href="Undo.WillFlushUndoRecord.html">WillFlushUndoRecord</a></td><td class="desc"></td><td class="desc1">Delegate used for willFlushUndoRecord.</td></tr>
    </table></div></div></div></div></body></html>