<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <link href="./css/stylesheet.css" rel="stylesheet" type="text/css"><title>Unity - Scripting API: Media.MediaEncoder.AddFrame</title></head> <body> <div class="content"><div class="section"><div class="mb20 clear" id=""><h1 class="heading inherit"><a href="Media.MediaEncoder.html">MediaEncoder</a>.AddFrame</h1><div class="clear"></div><div class="clear"></div><div class="suggest"><div class="suggest-wrap rel hide"><div class="loading hide"><div></div><div></div><div></div></div></div></div><a href="" class="switch-link gray-btn sbtn left hide"></a><div class="clear"></div></div><div class="subsection"><div class="signature"><div class="signature-CS sig-block"><span style="color:red;"></span>public bool <span class="sig-kw">AddFrame</span>(<a href="Texture2D.html">Texture2D</a> <span class="sig-kw">texture</span>);
    </div><div class="signature-CS sig-block"><span style="color:red;"></span>public bool <span class="sig-kw">AddFrame</span>(<a href="Texture2D.html">Texture2D</a> <span class="sig-kw">texture</span>,
<a href="Media.MediaTime.html">Media.MediaTime</a> <span class="sig-kw">time</span>);
    </div></div></div><div class="subsection"><h2>Parameters</h2><table class="list"><tr><td class="name lbl">texture</td><td class="desc"></td><td class="desc1">Texture containing the pixels to be written into the track for the current frame.</td></tr><tr><td class="name lbl">time</td><td class="desc"></td><td class="desc1">Timestamp for the new frame.</td></tr></table></div><div class="subsection"><h2>Returns</h2><p><strong>bool</strong>
        True if the operation succeeded. False otherwise.
      </p></div><div class="subsection"><h2>Description   描述</h2><p>Appends a frame to the file's video track.</p></div><div class="subsection"><p>Keep the number of video frames and audio samples aligned so that each track is syncrhonized as much as possible. For instance, in a file with 30FPS video and 48KHz audio, each added video frame should be followed by an audio buffer of 1600 sample frames.<br /><br /><strong>Note about timestamps</strong><br /><br />When adding a frame, a timestamp associated with this frame can optionally be specified. For the timestamp to be used, it must be valid (see MediaTime.IsValid).<br /><br />When no timestamp is provided, the frame is appended using the specified video frame rate (see <a href="Media.VideoTrackAttributes-frameRate.html">VideoTrackAttributes.frameRate</a>) to compute the inter-frame time difference. There are situations where a timestamp must be specified:<br /><br /><strong>1.</strong> When the video track is created without a valid rate (see <a href="Media.VideoTrackAttributes-frameRate.html">VideoTrackAttributes.frameRate</a>. In this case, <strong>all</strong> added frames must be given a timestamp because there is no pre-defined inter-frame time difference.<br />
<strong>2.</strong> When the time difference between the last frame and the appended frame is not as expected. For example, when recording in Unity and the game loop lasts longer than expected, the inter-frame time difference is no longer constant. In this case, you must specify the timestamp associated with the appended frame. This way, when playing back the recorded movie, it will match what was seen during recording. The resulting movie will then have a <strong>Variable Frame Rate</strong> (VFR) because there is not exactly the same time difference between each frame.<br /><br />For tracks with a pre-defined rate, it is valid to mix both variants, with and without timestamps, as long as the time values end up monotonically increasing. Frames added this way do not have to be equally spaced in time. It is invalid to add a frame with a timestamp earlier than the timestamp of the last frame.</p></div><hr class="section" /><div class="subsection"><div class="signature"><div class="signature-CS sig-block"><span style="color:red;"></span>public bool <span class="sig-kw">AddFrame</span>(int <span class="sig-kw">width</span>,
int <span class="sig-kw">height</span>,
int <span class="sig-kw">rowBytes</span>,
<a href="TextureFormat.html">TextureFormat</a> <span class="sig-kw">format</span>,
NativeArray&lt;byte&gt; <span class="sig-kw">data</span>);
    </div><div class="signature-CS sig-block"><span style="color:red;"></span>public bool <span class="sig-kw">AddFrame</span>(int <span class="sig-kw">width</span>,
int <span class="sig-kw">height</span>,
int <span class="sig-kw">rowBytes</span>,
<a href="TextureFormat.html">TextureFormat</a> <span class="sig-kw">format</span>,
NativeArray&lt;byte&gt; <span class="sig-kw">data</span>,
<a href="Media.MediaTime.html">Media.MediaTime</a> <span class="sig-kw">time</span>);
    </div></div></div><div class="subsection"><h2>Parameters</h2><table class="list"><tr><td class="name lbl">width</td><td class="desc"></td><td class="desc1">Image width.</td></tr><tr><td class="name lbl">height</td><td class="desc"></td><td class="desc1">Image height.</td></tr><tr><td class="name lbl">rowBytes</td><td class="desc"></td><td class="desc1">Bytes in one row of pixels. Useful in case lines include padding. Can be set to 0 if there is no padding.</td></tr><tr><td class="name lbl">format</td><td class="desc"></td><td class="desc1">Pixel format. Only TextureFormat.RGBA32 is supported at this time.</td></tr><tr><td class="name lbl">data</td><td class="desc"></td><td class="desc1">Bytes containing the image.</td></tr><tr><td class="name lbl">time</td><td class="desc"></td><td class="desc1">Timestamp for new frame.</td></tr></table></div><div class="subsection"><h2>Returns</h2><p><strong>bool</strong>
        True if the operation succeeded. False otherwise.
      </p></div><div class="subsection"><h2>Description   描述</h2><p>Appends a frame from a raw buffer to the file's video track.</p></div><div class="subsection"><p>This version of AddFrame helps save image copying if the source data is not in a Texture2D. For example, when pixel data comes from a <a href="Rendering.AsyncGPUReadbackRequest.html">AsyncGPUReadbackRequest</a>. For more details, see the note about audio/video alignment in the variant of <a href="Media.MediaEncoder.AddFrame.html">MediaEncoder.AddFrame</a> taking a <a href="Texture2D.html">Texture2D</a>.<br /><br />For more information about the <code class="mono">time</code> parameter, see <strong>Note about timestamps</strong> in the other overloads of this method.</p></div></div></div></div></body></html>